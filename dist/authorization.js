/*!
 * Name: authorization
 * Id: authorization
 * Version: 0.9.1
 * Description: Handle user authorization and suspension in the chatbot. A plugin for Red-Bot.io
 * Author: Guido Bellomo (https://github.com/guidone)
 * Repository: https://github.com/guidone/red-bot-authorization
 */
define(["../../../src/components","../../src/components","code-plug","react","rsuite"],(e,t,n,r,o)=>(()=>{"use strict";var a={961:(e,t,n)=>{n.r(t);var r=n(297),o=n.n(r),a=n(399),l=n(186),s=n(222);const u=({formValue:e={},formError:t=null,onChange:n})=>(e=e||{},o().createElement(s.Form,{formValue:e,formError:t,onChange:n,fluid:!0,autoComplete:"off"},o().createElement(s.FormGroup,null,o().createElement(s.ControlLabel,null,"Authorized"),o().createElement(s.Toggle,{onChange:t=>n({...e,authorized:t,suspended:!t&&e.suspended}),checked:e.authorized}),o().createElement(s.HelpBlock,null,"Only authorized users can access private chatbot")),o().createElement(s.FormGroup,null,o().createElement(s.ControlLabel,null,"Suspend"),o().createElement(s.Toggle,{onChange:t=>n({...e,suspended:t,authorized:!t&&e.authorized}),checked:e.suspended}),o().createElement(s.HelpBlock,null,"Suspended user cannot access a public chatbot"))));var i=n(738);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const p=[{name:"authorization.notAuthorized",description:"Shown when the user is not authorized in a private chatbot"},{name:"authorization.suspended",description:"Shown when the user is suspeded in a public chatbot"},{name:"authorization.userNotFound",description:"Shown when the user is not found on the local db, something went wrong"}],{NodeRedNode:m,SlugHelp:d,TypeCommand:h}=l.HelpElements;(0,a.plug)("user-tabs",u,{id:"suspend-user",label:"Access",permission:"users.authorize"});(0,a.plug)("sidebar",null,{permission:"configure",id:"configuration",label:"Configuration",icon:"cog",options:[{id:"authorization",label:"Bot Access",url:"/authorization"}]}),(0,a.plug)("pages",(0,l.withConfigurationPage)("authorization",({value:e,onSubmit:t=(()=>{}),disabled:n=!1})=>{const[a,l]=(0,r.useState)(e),[u,m]=(0,r.useState)(null),[d,h]=(0,r.useState)("access"),g=(0,r.useRef)(null);return o().createElement("div",null,o().createElement(s.Nav,{appearance:"tabs",activeKey:d,onSelect:h,style:{marginBottom:"25px"}},o().createElement(s.Nav.Item,{eventKey:"access"},"Access"),o().createElement(s.Nav.Item,{eventKey:"translations"},"Translations")),o().createElement(s.Form,{disabled:!0,formValue:a,formError:u,ref:g,checkTrigger:"none",layout:"vertical",fluid:!0,onChange:e=>{l(e),m(null)},onCheck:e=>{m(e)}},"translations"===d&&o().createElement(r.Fragment,null,o().createElement(s.FormGroup,null,o().createElement(s.FormControl,{name:"translations",accepter:i.Dictionary,schema:p,disabled:n}))),"access"===d&&o().createElement(r.Fragment,null,o().createElement(s.FormGroup,null,o().createElement(s.ControlLabel,null,"Private"),o().createElement(s.FormControl,{name:"private",accepter:(b=s.Toggle,({value:e,...t})=>o().createElement(b,c({checked:e},t))),disabled:n}),o().createElement(s.HelpBlock,null,"In a private chatbot, only authorized user can access"))),o().createElement(s.FormGroup,{style:{marginTop:"40px"}},o().createElement(s.ButtonToolbar,null,o().createElement(s.Button,{disabled:n,appearance:"primary",onClick:()=>{g.current.check()&&t(a)}},"Save configuration"),o().createElement(s.Button,{disabled:n,appearance:"default",onClick:()=>{confirm("Reset configuration?")&&l(e)}},"Reset")))));var b},{Legend:()=>o().createElement("div",null,o().createElement(m,null,"Authorization"),o().createElement("p",null,"Set the chatbot private, only authorized user will be able to use the chatbot. Set the authorization in the users section."),o().createElement("p",null,"For public chatbot it's possibile to suspend a user.")),title:"Bot Access"}),{permission:"configure",url:"/authorization",title:"Welcome Message",id:"page-authorization"}),(0,a.plug)("permissions",null,{permission:"users.authorize",name:"Authorize/Suspend",description:"Authorize or suspend a user",group:"Users"})},738:t=>{t.exports=e},186:e=>{e.exports=t},399:e=>{e.exports=n},297:e=>{e.exports=r},222:e=>{e.exports=o}},l={};function s(e){if(l[e])return l[e].exports;var t=l[e]={exports:{}};return a[e](t,t.exports,s),t.exports}return s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s(961)})());